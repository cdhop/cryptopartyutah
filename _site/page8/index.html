<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CryptoParty - Utah</title>
    <meta name="description" content="Party like it's December 31st, 1983">
    <link rel="canonical" href="http://cryptopartyutah.org/page8/">

    <link rel="icon" type="image/png" href="/favicon.png" />

    <link rel="stylesheet" href="/css/cryptoparty.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	    <script src="js/html5shiv.js"></script>
	    <script src="js/respond.min.js"></script>
	<![endif]-->
</head>


    <body>
      <nav class="navbar navbar-inverse" role="navigation">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="15" height="15" viewBox="0, 0, 255.555, 261.395">
        <g id="Layer_1" transform="translate(-0.207, 27.527)">
          <g>
            <path d="M61.707,104.953 C61.707,65.752 91.604,33.973 128.484,33.973" fill-opacity="0" stroke="#FFF" stroke-width="30"/>
            <path d="M128.484,33.973 C165.364,33.973 195.262,65.752 195.262,104.953" fill-opacity="0" stroke="#FFF" stroke-width="30"/>
          </g>
          <g>
            <path d="M223.221,113.953 C228.063,113.953 231.988,119.326 231.988,125.953 L231.988,221.367 C231.988,227.995 228.063,233.367 223.221,233.367 L33.748,233.367 C28.906,233.367 24.98,227.995 24.98,221.367 L24.98,125.953 C24.98,119.326 28.906,113.953 33.748,113.953 z M88.952,138.484 C69.516,138.484 53.776,154.224 53.776,173.66 C53.776,193.097 69.516,208.836 88.952,208.836 C102.02,208.836 113.404,201.552 119.407,190.9 L133.426,190.754 L144.443,179.663 L152.789,188.155 L161.245,179.663 L169.663,188.155 L178.155,179.517 L186.977,188.375 L187.196,188.302 L201.911,173.367 C203.558,171.647 203.705,170.073 201.838,168.206 L189.978,156.2 L119.187,156.054 C113.038,145.622 101.873,138.484 88.952,138.484 z M73.579,163.631 C78.813,163.631 83.023,167.95 83.023,173.074 C83.023,178.309 78.813,182.591 73.579,182.591 C68.308,182.591 64.135,178.309 64.135,173.074 C64.135,167.95 68.345,163.631 73.579,163.631 z" fill="#FFF"/>
            <path d="M223.221,113.953 C228.063,113.953 231.988,119.326 231.988,125.953 L231.988,221.367 C231.988,227.995 228.063,233.367 223.221,233.367 L33.748,233.367 C28.906,233.367 24.98,227.995 24.98,221.367 L24.98,125.953 C24.98,119.326 28.906,113.953 33.748,113.953 z M88.952,138.484 C69.516,138.484 53.776,154.224 53.776,173.66 C53.776,193.097 69.516,208.836 88.952,208.836 C102.02,208.836 113.404,201.552 119.407,190.9 L133.426,190.754 L144.443,179.663 L152.789,188.155 L161.245,179.663 L169.663,188.155 L178.155,179.517 L186.977,188.375 L187.196,188.302 L201.911,173.367 C203.558,171.647 203.705,170.073 201.838,168.206 L189.978,156.2 L119.187,156.054 C113.038,145.622 101.873,138.484 88.952,138.484 z M73.579,163.631 C78.813,163.631 83.023,167.95 83.023,173.074 C83.023,178.309 78.813,182.591 73.579,182.591 C68.308,182.591 64.135,178.309 64.135,173.074 C64.135,167.95 68.345,163.631 73.579,163.631 z" fill-opacity="0" stroke="#FFF" stroke-width="1"/>
          </g>
      </g>
      </svg>
      CryptoParty - Utah
    </a>
  </div> 
  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
      <li><a href="/links/">Links</a></li>
    </ul>
  </div>
</nav>

      <div id="content">
        <div class="container">
          <div class="home">

  
  <div class="row">

    <header class="post-header">
      <a class="post-link" href="/howto/2014/06/05/add-ssl-to-your-site/"><h1>Add SSL to your site</h1></a>
      <p class="meta">Jun 5, 2014</p>
    </header>
      
    <article class="post-content">
      <p>Part of the <a href="https://resetthenet.org">Reset the Net</a> initative is encouraging webmasters to implement SSL on their sites.  SSL uses
encryption to protect the content of the communications between the visitor and the site.  While using SSL might be ‘optional’ for 
a site that only serves static information (and doesn’t have users submit their personal information), it is irresponsible for sites
that have visitors submit their information.  We will walk people through the steps necessary to protect their 
sites with SSL.</p>

<h3 id="assumptions">Assumptions</h3>

<p>This article assumes that your website is hosted on a server running Linux (We will cover Ubuntu/Debian based systems).  We also assume
that you have admin/root access on your server.  If you are hosted with a service where you don’t have admin/root access, then this 
article will still be useful, but you will probably need to contact your service provider for assistance in some of the steps described 
below.</p>

<h3 id="step-1-generating-your-private-key-and-certificate-signing-request-csr">Step 1: Generating your Private Key and Certificate Signing Request (CSR)</h3>

<p>You will need a private key (which your server use to communicate securely), and a CSR (which you will use to obtain a certificate).</p>

<p>We will be using OpenSSL for this step.  There are a number of options (which we will explain) available.  We will start with the following
command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># openssl req -new -newkey rsa:4096 -keyout yourdomain.key -out yourdomain.csr
</code></pre>
</div>

<p>Explanation:</p>

<ul>
  <li>‘req -new’ tells openssl that we will be creating a CSR</li>
  <li>‘-newkey’ we will also be creating a private key</li>
  <li>‘rsa:4096’ the private key will be a RSA key with a keysize of 4096 bits (Note: the minimum keysize currently accepted by certificate authorities is 2048)</li>
  <li>‘-keyout yourdomain.key’ specify the filename of the private key (Please change ‘yourdomain’ to your domain name)</li>
  <li>‘-out yourdomain.car’ specify the filename of the CSR (Again change ‘yourdomain’ to your domain name)</li>
</ul>

<p>There are other options that you could use, but this generates an encrypted private key and a CSR.  If you want to generate an unencrypted private key, 
then include ‘-nodes’ after the ‘rsa:4096’ option.</p>

<p>OpenSSL will prompt you for a passphase for your key (unless you included the ‘-nodes’ option), and ask you for additional information (some of which is optional).<br />
Once you finish, you will have a private key and CSR.</p>

<p>On Debian/Ubuntu, you will generally want to store your private key in the ‘/etc/ssl/private’ directory.</p>

<p>You will use the CSR in the next step to obtain your certificate.</p>

<h3 id="step-2-obtaining-a-certificate">Step 2: Obtaining a certificate</h3>

<p>A signed certificate is used by a browser to authenticate, and help setup secure communications using SSL/TLS.  A Certificate Authority (CA) is a trusted organization
which is recognized by most browsers to authenticate sites using SSL/TLS.  In order to get a CA to generate a signed certificate you must verify your information, and 
usually pay a fee for their service (Note: there are some ‘free’ certificate authorities).</p>

<p>Generally, there are three ‘levels’ of verification/validation by CAs:</p>

<ul>
  <li>Domain validation - usually they will send an email message to one of the email addresses associated with the domain name registration.</li>
  <li>Organization validation - The CA will investigate your organization to verify its legitimacy (usually more expensive)</li>
  <li>Extended validation - Like Organization validation, but even more rigorous (usually done with large organizations and financial institutions)</li>
</ul>

<p>The process will vary, but you will at some point provide the CA with the CSR you generated in Step 1.</p>

<p>Once they have completed validation, the CA will issue a signed certificate for your domain.  Usually they will also include several other certificates asscoiated with
their chain of trust.</p>

<p>As an alternative, you can ‘self-sign’ and generate your own certificate.  This is simpler and usually cheaper that getting one from a CA, but will most probably 
cause a visitor’s browser to alert and warn of ‘an untrusted site’.  To generate your own certificate, use OpenSSL as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># openssl x509 -req -days 365 -in yourdomain.csr -signkey yourdomain.key -out yourdomain.crt
</code></pre>
</div>

<p>Explanation:</p>

<ul>
  <li>‘x509 -req’ tells openssl that we will be creating a signed-certificate</li>
  <li>‘-days 365’ our certificate will be valid for one year (most certificates are signed by CAs for the length of period)</li>
  <li>‘-in yourdomain.csr’ OpenSSL will use the CSR you generated in Step One</li>
  <li>‘-signkey yourdomain.key’ OpenSSL will use your private key to ‘sign’ the certificate</li>
  <li>‘-out yourdomain.crt’ specify the filename of the certificate</li>
</ul>

<p>Once you have your certificate(s) you will generally want to keep them in ‘certs’ directory.  On Debian/Ubuntu systems the ‘certs’ directory is, ‘/etc/ssl/certs’.</p>

<h3 id="step-3-configuring-your-webserver-to-use-ssl">Step 3: Configuring your webserver to use SSL</h3>

<p>Now that you have your private key and certificate(s), it is time to configure your server to use SSL/TLS.  We will cover configuring Apache (A later article will cover using NGINX).</p>

<h4 id="configuring-apache-on-debianubuntu">Configuring Apache on Debian/Ubuntu</h4>

<p>You will need to enable a few Apache modules in order to use SSL/TLS.  You can enable these modules with the following commands:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># a2enmod ssl
# a2enmod headers
# a2enmod rewrite
</code></pre>
</div>

<p>The first module is the only one truly necessary to get SSL working, but the other modules will be used in our example configuration, so it is a good idea to add them now.</p>

<p>Next, you will need to create/modify the VirtualHost files located at: ‘/etc/apache2/sites-available’.  By default, there are two files, ‘000-default.conf’ and ‘default-ssl.conf’.<br />
The ‘000-default.conf’ file is configured to serve http, and the ‘default-ssl.conf’ is configured for SSL.</p>

<p>Note: the ‘default-ssl.conf’ site is not enabled by default. You can enable it with the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># a2ensite default-ssl.conf
</code></pre>
</div>

<p>There are many ways to configure SSL, but the example we will show you redirects all http traffic to https (this is why we enabled the ‘rewrite’ Apache module).<br />
Below is an example (which you can use unmodified) for the ‘000-default.conf’ file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;VirtualHost *:80&gt;
    ReWriteEngine on
    ReWriteCond %{SERVER_PORT} !^443$
    ReWriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]
&lt;/VirtualHost&gt;
</code></pre>
</div>

<p>Next, is the ‘default-ssl.conf’ file (This one is more involved).</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;IfModule mod_ssl.c&gt;
&lt;VirtualHost _default_:443&gt;
    ServerName yourdomain
    ServerAlias www.yourdomain

    DocumentRoot /var/www/
    &lt;Directory /&gt;
            Options FollowSymLinks
            AllowOverride None
    &lt;/Directory&gt;
    &lt;Directory /var/www/&gt;
            Options FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/ssl_access.log combined

    # Setup  HTTP Strict Transportation Security
    Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains"

    SSLEngine on

    SSLCertificateFile    /etc/ssl/certs/yourdomain.crt
    SSLCertificateKeyFile /etc/ssl/private/yourdomain.key
    SSLCertificateChainFile /etc/ssl/certs/yourdomain.chain

    SSLProtocol ALL -SSLv2 -SSLv3
    SSLHonorCipherOrder On
    SSLCipherSuite AES256+EECDH:!aNULL

&lt;/VirtualHost&gt;
&lt;/IfModule&gt;
</code></pre>
</div>

<p>Key points of interest are the lines which start with ‘SSLCertificate’, you will want to make sure that they are pointing to the files you created/obtained in steps one and two.
The line that starts with ‘Header’ will help prevent visitors to your site from connecting in the future via http, and is a good security move. You will need to modify this 
example to match your domain/website.</p>

<p>Once you are satified the these files, you’ll need to restart Apache to make your changes effective.</p>

<div class="highlighter-rouge"><pre class="highlight"><code># service apache2 restart
</code></pre>
</div>

<p>Note: If your private key is encrypted, then you will be prompted for your password.</p>

<h3 id="step-4-test-your-site">Step 4: Test Your Site</h3>

<p>Now it is time to verify that your site is working with SSL.  Certainly, visiting the site is a good step, but there is a tool available online with will give your site’s SSL Configuration a thorough testing:</p>

<p><a href="https://ssllabs.com/ssltest">SSL Labs - SSL Test</a></p>


    </article>
  </div>
  

  
  <div class="row">
    <hr/>
    
    <nav>
      <ul class="pager">
	
	  <li><a href="/page7">
            <span class="glyphicon glyphicon-triangle-left" aria-hidden="true"></span> Previous
	  </a></li>
	
	
	  <li><a href="/page9">
	    Next <span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span>
	  </a></li>
	
      </ul>
    </nav>

  </div>
  
</div>

        </div>
      </div>

      <div id="about">
  <div class="container">
    <div class="row">
      <div class="col-12">
	    <h2>About</h2>
	    <p>We are focused on online privacy advocacy and education.  We welcome anyone interested, or concerned with how technology impacts privacy.  We plan on providing education and support for using cryptography and good security practices. </p>
	  </div>
	</div>
  </div>
</div>
      <footer>
  <div class="container">
    <div class="row">

      <div class="col-sm-4">
        <h4>Contact</h4>
        <ul class="list-unstyled">
          <li><a href="mailto:cdhop@disquietingcandor.net">cdhop@disquietingcandor.net</a></li>
          <li><a href="/files/C8670D8D.asc">GPG/PGP Key</a></li>
        </ul>
      </div>

      <div class="col-sm-2">
        <h4>Resources</h4>
        <ul class="list-unstyled">
          <li>
            <a href="https://github.com/cdhop/cryptopartyutah">
              <span class="icon github">
                <svg version="1.1" width="16px" height="16px" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                  <path fill-rule="evenodd" clip-rule="evenodd" fill="#000" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                  c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                  c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                  c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                  C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                  c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                  c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                  c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                  c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>
              <span class="username">GitHub</span>
            </a>
          </li>
          <li>
            <a href="/feed.xml">
              <span>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="16px" height="16px" id="RSSicon" viewBox="0 0 256 256">
                  <defs>
                    <linearGradient x1="0.085" y1="0.085" x2="0.915" y2="0.915" id="RSSg">
                    <stop  offset="0.0" stop-color="#E3702D"/><stop  offset="0.1071" stop-color="#EA7D31"/>
                    <stop  offset="0.3503" stop-color="#F69537"/><stop  offset="0.5" stop-color="#FB9E3A"/>
                    <stop  offset="0.7016" stop-color="#EA7C31"/><stop  offset="0.8866" stop-color="#DE642B"/>
                    <stop  offset="1.0" stop-color="#D95B29"/>
                    </linearGradient>
                  </defs>
                  <rect width="256" height="256" rx="55" ry="55" x="0"  y="0"  fill="#CC5D15"/>
                  <rect width="246" height="246" rx="50" ry="50" x="5"  y="5"  fill="#F49C52"/>
                  <rect width="236" height="236" rx="47" ry="47" x="10" y="10" fill="url(#RSSg)"/>
                  <circle cx="68" cy="189" r="24" fill="#FFF"/>
                  <path d="M160 213h-34a82 82 0 0 0 -82 -82v-34a116 116 0 0 1 116 116z" fill="#FFF"/>
                  <path d="M184 213A140 140 0 0 0 44 73 V 38a175 175 0 0 1 175 175z" fill="#FFF"/>
                </svg>
              </span>
              <span>RSS</span>
            </a>
          </li>
        </ul>
      </div>

      <div class="col-sm-6">
        <h4>Darknet</h4>
        <ul class="list-unstyled">
          <li>Hidden Service (Tor): <a href="http://5i3gqg3jz7zs6x62.onion">5i3gqg3jz7zs6x62.onion</a></li>
          <li>Eepsite (i2p): <a href="http://utah.cryptoparty.i2p">utah.cryptoparty.i2p</a></li>
        </ul>
      </div>

    </div>
  </div>
</footer>

      <script src="/js/jquery.min.js"></script>
      <script src="/js/bootstrap.min.js"></script>
    </body>
</html>